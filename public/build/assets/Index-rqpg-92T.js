import{r as n,a as m,j as e,H as me,L as f}from"./app-6I9721aU.js";import{A as he}from"./app-layout-DyTMJkqj.js";import{B as l}from"./button-DrU-aMAO.js";import{I as xe}from"./input-Bff_fMaP.js";import{S as ue,a as fe,b as je,c as pe,d as w}from"./select-DGTSMjtW.js";import{B as b}from"./badge-rMxs3fCG.js";import{C as j,a as ge,b as Ne,c as p}from"./card-BDAIx5wZ.js";import{C as L}from"./checkbox-Bjz2wjSx.js";import{R as E,S as R,P as ve,a as _e,b as we,c as be,d as Ce,e as Se,A as U,f as V,g as H,h as q,i as M,j as W,k as G,l as J}from"./pagination-C5qR_IMS.js";import{T as C,P as K}from"./trash-2-CMCh9K6r.js";import{F as De}from"./filter-rXvgbKVy.js";import{S as ye,a as Te,E as ke}from"./star-BGiip6OW.js";import{U as S}from"./user-C0Ji9lEp.js";import{I as Fe}from"./image-B5HmhuCb.js";import{M as Ae}from"./map-pin-BmFHFDPs.js";import{C as Ie}from"./calendar-B4OOUo-j.js";import{S as Pe}from"./square-pen-B1VTGfIT.js";/* empty css            */import"./index-QwNLneO7.js";import"./index-B01asWq1.js";import"./index-DXmxTaRP.js";import"./check-n689P7YA.js";const Oe=[{title:"Dashboard",href:"/dashboard"},{title:"Testimonies",href:"/testimonies"}];function as(Q){const{testimonies:i=null,filters:X=null}=Q||{},a={data:i?.data||[],links:i?.links||[],meta:{current_page:i?.current_page||1,last_page:i?.last_page||1,per_page:i?.per_page||12,total:i?.total||0,from:i?.from||null,to:i?.to||null}},D=X||{},[c,y]=n.useState(D.search||""),[x,T]=n.useState(D.featured||"__all__"),[r,h]=n.useState([]),[Y,g]=n.useState(!1),[Z,N]=n.useState(!1),[k,F]=n.useState(null),[ee,se]=n.useState(!0);n.useEffect(()=>{if(ee){se(!1);return}const s=setTimeout(()=>{I()},300);return()=>clearTimeout(s)},[c]);const A=s=>s==="__all__"?"":s,I=()=>{const s={};c?.trim()&&(s.search=c.trim());const t=A(x);t&&(s.featured=t),m.get("/testimonies",Object.keys(s).length>0?s:{},{preserveState:!0,preserveScroll:!0})},te=(s={})=>{const t={},d=s.search!==void 0?s.search:c,_=s.featured!==void 0?s.featured:x;d?.trim()&&(t.search=d.trim());const B=A(_);B&&(t.featured=B),m.get("/testimonies",Object.keys(t).length>0?t:{},{preserveState:!0,preserveScroll:!0})},P=()=>{y(""),T("__all__"),m.get("/testimonies")},ae=s=>{s&&a.data.length>0?h(a.data.map(t=>t.id)):h([])},le=(s,t)=>{h(t?d=>[...d,s]:d=>d.filter(_=>_!==s))},re=s=>{F(s),g(!0)},ie=()=>{k&&m.delete(`/testimonies/${k}`),g(!1),F(null)},O=()=>{N(!0)},ne=()=>{r.length>0&&m.post("/testimonies/bulk-delete",{ids:r}),N(!1),h([])},ce=s=>{m.patch(`/testimonies/${s.id}/toggle-featured`,{},{preserveState:!0,preserveScroll:!0})},o=!!(c?.trim()||x!=="__all__");a.data.length>0;const v=a.meta.total===0,u=a.meta.total,$=a.meta.from,z=a.meta.to,oe=()=>v&&!o?"No testimonies found. Create your first testimony to get started.":v&&o?"No results match your current filters.":$&&z?`Showing ${$} to ${z} of ${u} results`:u>0?`${u} testimon${u!==1?"ies":"y"}`:"Loading testimonies...",de=()=>e.jsx(j,{className:"overflow-hidden",children:e.jsx(p,{className:"py-16",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:e.jsx(S,{className:"w-8 h-8 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:o?"No testimonies found":"No testimonies yet"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:o?"Try adjusting your filters to find what you're looking for.":"Create your first testimony to share survivor stories."})]}),e.jsxs("div",{className:"flex justify-center gap-2 pt-4",children:[o&&e.jsxs(l,{variant:"outline",onClick:P,className:"gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Clear Filters"]}),e.jsx(f,{href:"/testimonies/create",children:e.jsxs(l,{className:"gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Create Testimony"]})})]})]})})});return e.jsxs(he,{breadcrumbs:Oe,children:[e.jsx(me,{title:"Testimonies"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Testimonies"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:oe()})]}),e.jsxs("div",{className:"flex gap-2",children:[r.length>0&&e.jsxs(l,{variant:"destructive",onClick:O,size:"sm",className:"gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Delete Selected (",r.length,")"]}),e.jsx(f,{href:"/testimonies/create",children:e.jsxs(l,{size:"sm",className:"gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"Create Testimony"]})})]})]}),e.jsxs(j,{className:"overflow-hidden",children:[e.jsx(ge,{className:"px-6 py-4 border-b",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(Ne,{className:"text-lg font-semibold",children:"Filters"})]}),o&&e.jsxs(l,{variant:"outline",size:"sm",onClick:P,className:"gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Clear Filters"]})]})}),e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(xe,{type:"text",placeholder:"Search testimonies...",value:c,onChange:s=>y(s.target.value),className:"pl-10"})]}),e.jsxs(ue,{value:x,onValueChange:s=>{T(s),te({featured:s})},children:[e.jsx(fe,{children:e.jsx(je,{placeholder:"All Testimonies"})}),e.jsxs(pe,{children:[e.jsx(w,{value:"__all__",children:"All Testimonies"}),e.jsx(w,{value:"true",children:"Featured Only"}),e.jsx(w,{value:"false",children:"Not Featured"})]})]}),e.jsxs(l,{onClick:I,className:"gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Search"]})]})})]}),v?e.jsx(de,{}):e.jsxs(e.Fragment,{children:[r.length>0&&e.jsx(j,{children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{checked:r.length===a.data.length&&a.data.length>0,onCheckedChange:ae}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.length," of ",a.data.length," selected"]})]}),e.jsxs(l,{variant:"destructive",size:"sm",onClick:O,className:"gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Delete Selected"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.data.map(s=>e.jsxs(j,{className:"overflow-hidden group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx(L,{checked:r.includes(s.id),onCheckedChange:t=>le(s.id,!!t)})}),e.jsx("button",{onClick:()=>ce(s),className:"absolute top-3 right-3 z-10 p-1 rounded-full bg-black/50 text-white opacity-0 group-hover:opacity-100 transition-opacity",children:s.is_featured?e.jsx(ye,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}):e.jsx(Te,{className:"w-4 h-4"})}),e.jsx("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center",children:s.translated_content.imageUrl?e.jsx("img",{src:s.translated_content.imageUrl,alt:s.translated_content.title?.en||"Testimony",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx(S,{className:"w-8 h-8"}),e.jsx("span",{className:"text-xs",children:"No image"})]})}),s.media_count>0&&e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsxs(b,{variant:"secondary",className:"gap-1",children:[e.jsx(Fe,{className:"w-3 h-3"}),s.media_count]})})]}),e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[s.translated_content.category?.en&&e.jsx(b,{variant:"outline",className:"text-xs",children:s.translated_content.category.en}),e.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:s.translated_content.title?.en||"Untitled"}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3",children:s.translated_content.description?.en||"No description"}),e.jsxs("div",{className:"space-y-1",children:[s.survivor_name&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(S,{className:"w-3 h-3"}),s.survivor_name,s.survivor_age&&`, ${s.survivor_age} years old`]}),s.survivor_location&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(Ae,{className:"w-3 h-3"}),s.survivor_location]}),s.date_of_incident&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(Ie,{className:"w-3 h-3"}),new Date(s.date_of_incident).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(f,{href:`/testimonies/${s.id}`,children:e.jsx(l,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ke,{className:"w-4 h-4"})})}),e.jsx(f,{href:`/testimonies/${s.id}/edit`,children:e.jsx(l,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(Pe,{className:"w-4 h-4"})})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>re(s.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:e.jsx(C,{className:"w-4 h-4"})})]}),s.is_featured&&e.jsx(b,{variant:"default",className:"text-xs",children:"Featured"})]})]})})]},s.id))}),a.meta.last_page>1&&e.jsx("div",{className:"flex justify-center",children:e.jsx(ve,{children:e.jsx(_e,{children:a.links.map((s,t)=>e.jsx(we,{children:s.label==="&laquo; Previous"?e.jsx(be,{href:s.url||"#",className:s.url?"":"pointer-events-none opacity-50"}):s.label==="Next &raquo;"?e.jsx(Ce,{href:s.url||"#",className:s.url?"":"pointer-events-none opacity-50"}):e.jsx(Se,{href:s.url||"#",isActive:s.active,className:s.url?"":"pointer-events-none opacity-50",children:s.label})},t))})})})]})]}),e.jsx(U,{open:Y,onOpenChange:g,children:e.jsxs(V,{children:[e.jsxs(H,{children:[e.jsx(q,{children:"Are you sure?"}),e.jsx(M,{children:"This action cannot be undone. This will permanently delete the testimony and all associated content."})]}),e.jsxs(W,{children:[e.jsx(G,{children:"Cancel"}),e.jsx(J,{onClick:ie,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(U,{open:Z,onOpenChange:N,children:e.jsxs(V,{children:[e.jsxs(H,{children:[e.jsxs(q,{children:["Delete ",r.length," testimonies?"]}),e.jsx(M,{children:"This action cannot be undone. This will permanently delete the selected testimonies and all associated content."})]}),e.jsxs(W,{children:[e.jsx(G,{children:"Cancel"}),e.jsx(J,{onClick:ne,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete All"})]})]})})]})}export{as as default};
