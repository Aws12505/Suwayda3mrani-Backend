import{r as g,j as e,u as V}from"./app-C7GeCeqo.js";import{a as f,B as I}from"./button-DUJ2hcPX.js";import{I as v}from"./input-b61IUe-d.js";import{T as G}from"./textarea-Dsyl03vN.js";import{C as L}from"./checkbox-DiNa32u-.js";import{C as j,a as T,b as C,c as _}from"./card-BsXVudJB.js";import{u as z,c as H,a as N,P as K}from"./index-BpyxFFCF.js";import{u as q,a as O,d as k,R as J,I as Q}from"./index-C5Bs_mjf.js";import{P as x}from"./index-CJWcNj5i.js";import{B as U}from"./badge-OZnWOJh7.js";/* empty css            */import"./index-BZiUBkJp.js";import"./check-DEOZK67P.js";var h="Tabs",[W,he]=H(h,[k]),R=k(),[X,y]=W(h),S=g.forwardRef((a,s)=>{const{__scopeTabs:l,value:o,onValueChange:r,defaultValue:i,orientation:n="horizontal",dir:u,activationMode:b="automatic",...p}=a,c=q(u),[d,t]=z({prop:o,onChange:r,defaultProp:i??"",caller:h});return e.jsx(X,{scope:l,baseId:O(),value:d,onValueChange:t,orientation:n,dir:c,activationMode:b,children:e.jsx(x.div,{dir:c,"data-orientation":n,...p,ref:s})})});S.displayName=h;var P="TabsList",A=g.forwardRef((a,s)=>{const{__scopeTabs:l,loop:o=!0,...r}=a,i=y(P,l),n=R(l);return e.jsx(J,{asChild:!0,...n,orientation:i.orientation,dir:i.dir,loop:o,children:e.jsx(x.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:s})})});A.displayName=P;var F="TabsTrigger",M=g.forwardRef((a,s)=>{const{__scopeTabs:l,value:o,disabled:r=!1,...i}=a,n=y(F,l),u=R(l),b=B(n.baseId,o),p=E(n.baseId,o),c=o===n.value;return e.jsx(Q,{asChild:!0,...u,focusable:!r,active:c,children:e.jsx(x.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":p,"data-state":c?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:b,...i,ref:s,onMouseDown:N(a.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?n.onValueChange(o):d.preventDefault()}),onKeyDown:N(a.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&n.onValueChange(o)}),onFocus:N(a.onFocus,()=>{const d=n.activationMode!=="manual";!c&&!r&&d&&n.onValueChange(o)})})})});M.displayName=F;var $="TabsContent",D=g.forwardRef((a,s)=>{const{__scopeTabs:l,value:o,forceMount:r,children:i,...n}=a,u=y($,l),b=B(u.baseId,o),p=E(u.baseId,o),c=o===u.value,d=g.useRef(c);return g.useEffect(()=>{const t=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(t)},[]),e.jsx(K,{present:r||c,children:({present:t})=>e.jsx(x.div,{"data-state":c?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":b,hidden:!t,id:p,tabIndex:0,...n,ref:s,style:{...a.style,animationDuration:d.current?"0s":void 0},children:t&&i})})});D.displayName=$;function B(a,s){return`${a}-trigger-${s}`}function E(a,s){return`${a}-content-${s}`}var Y=S,Z=A,ee=M,te=D;function ae({className:a,...s}){return e.jsx(Y,{"data-slot":"tabs",className:f("flex flex-col gap-2",a),...s})}function re({className:a,...s}){return e.jsx(Z,{"data-slot":"tabs-list",className:f("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...s})}function w({className:a,...s}){return e.jsx(ee,{"data-slot":"tabs-trigger",className:f("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...s})}function se({className:a,...s}){return e.jsx(te,{"data-slot":"tabs-content",className:f("flex-1 outline-none",a),...s})}function ve({timelineEvent:a,mediaItems:s,submitUrl:l,method:o}){const{data:r,setData:i,post:n,put:u,processing:b,errors:p}=V({period:a?.period??"",sort_order:a?.sort_order??0,is_highlighted:a?.is_highlighted??!1,title:a?.title??{en:"",ar:""},description:a?.description??{en:"",ar:""},media_ids:a?.media?.map(t=>t.id)??[]}),c=()=>{o==="post"?n(l):u(l)},d=t=>{i("media_ids",r.media_ids.includes(t)?r.media_ids.filter(m=>m!==t):[...r.media_ids,t])};return e.jsxs("form",{onSubmit:t=>{t.preventDefault(),c()},className:"space-y-6",children:[e.jsxs(j,{children:[e.jsx(T,{children:e.jsx(C,{children:"Basic information"})}),e.jsxs(_,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"Period (e.g. 1991 – 1993)",value:r.period,onChange:t=>i("period",t.target.value),error:p.period}),e.jsx(v,{type:"number",label:"Sort order",value:r.sort_order,onChange:t=>i("sort_order",Number(t.target.value)),error:p.sort_order}),e.jsxs("div",{className:"flex items-center gap-2 col-span-full",children:[e.jsx(L,{checked:r.is_highlighted,onCheckedChange:t=>i("is_highlighted",!!t)}),e.jsx("span",{children:"Highlight on public timeline"})]})]})]}),e.jsxs(j,{children:[e.jsx(T,{children:e.jsx(C,{children:"Translations"})}),e.jsx(_,{children:e.jsxs(ae,{defaultValue:"en",children:[e.jsxs(re,{className:"mb-4",children:[e.jsx(w,{value:"en",children:"English"}),e.jsx(w,{value:"ar",children:"العربية"})]}),["en","ar"].map(t=>e.jsxs(se,{value:t,className:"space-y-4",children:[e.jsx(v,{label:"Title",value:r.title[t],onChange:m=>i("title",{...r.title,[t]:m.target.value}),error:p[`title.${t}`]}),e.jsx(G,{label:"Description",rows:6,value:r.description[t],onChange:m=>i("description",{...r.description,[t]:m.target.value}),error:p[`description.${t}`]})]},t))]})})]}),e.jsxs(j,{children:[e.jsx(T,{children:e.jsx(C,{children:"Select media (optional)"})}),e.jsxs(_,{children:[s.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No media found."}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.map(t=>{const m=r.media_ids.includes(t.id);return e.jsxs("button",{type:"button",onClick:()=>d(t.id),className:`relative rounded border ${m?"border-primary":"border-muted"} overflow-hidden`,children:[t.type==="video"?e.jsx("video",{src:t.url,className:"w-full h-28 object-cover",muted:!0}):e.jsx("img",{src:t.thumbnail,className:"w-full h-28 object-cover"}),m&&e.jsx(U,{variant:"default",className:"absolute top-2 right-2",children:"✓"})]},t.id)})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(I,{variant:"outline",type:"button",onClick:()=>history.back(),children:"Cancel"}),e.jsx(I,{type:"submit",disabled:b,children:o==="post"?"Create":"Update"})]})]})}export{ve as default};
