import{u as R,r as f,j as e,H as $}from"./app-C7GeCeqo.js";import{A as B}from"./app-layout-D7W7jbGm.js";import{B as k}from"./button-DUJ2hcPX.js";import{I as h}from"./input-b61IUe-d.js";import{L as r}from"./label-CoXjQEBm.js";import{T as D}from"./textarea-Dsyl03vN.js";import{S as P,a as V,b as O,c as H,d as E}from"./select-C4gCinrj.js";import{S as U}from"./switch-BxWUhEAH.js";import{C as v,a as N,b as _,c as y}from"./card-BsXVudJB.js";import{B as b}from"./badge-OZnWOJh7.js";import{V as w}from"./video-BZ_GQlit.js";import{I as p}from"./image-DzFVSJLU.js";import{E as z}from"./external-link-CKK4sAWh.js";import{U as u}from"./upload-B29nFSeK.js";import{L as G}from"./link-DPhyVwgF.js";import{D as Y}from"./database-8tDbIXlr.js";/* empty css            */import"./index-BpyxFFCF.js";import"./index-C5Bs_mjf.js";import"./index-CJWcNj5i.js";import"./index-BZiUBkJp.js";import"./check-DEOZK67P.js";function ue({media:t,translations:n}){const M=[{title:"Dashboard",href:"/dashboard"},{title:"Media",href:"/media"},{title:"Edit",href:`/media/${t.id}/edit`}],{data:a,setData:i,post:T,processing:C,errors:l}=R({_method:"PUT",type:t.type,source_type:t.source_type,file:null,google_drive_id:t.google_drive_id||"",external_url:t.external_url||"",thumbnail:null,title_en:n.title_en||"",title_ar:n.title_ar||"",description_en:n.description_en||"",description_ar:n.description_ar||"",source_url:t.source_url||"",featured_on_home:t.featured_on_home,is_active:t.is_active}),[c,o]=f.useState(null),[x,F]=f.useState(null);f.useEffect(()=>{t.file_path?o(`/storage/${t.file_path}`):t.source_type==="google_drive"&&t.google_drive_id?o(`https://drive.google.com/uc?id=${t.google_drive_id}`):t.external_url&&o(t.external_url),t.thumbnail_path&&F(`/storage/${t.thumbnail_path}`)},[t]);const L=s=>{const d=s.target.files?.[0];if(d)if(i("file",d),d.type.startsWith("image/")){const m=new FileReader;m.onload=g=>o(g.target?.result),m.readAsDataURL(d)}else o(null)},I=s=>{const d=s.target.files?.[0];if(d){i("thumbnail",d);const m=new FileReader;m.onload=g=>F(g.target?.result),m.readAsDataURL(d)}},A=s=>{s.preventDefault(),T(`/media/${t.id}`)},S=s=>{switch(s){case"upload":return e.jsx(u,{className:"w-5 h-5"});case"google_drive":return e.jsx(Y,{className:"w-5 h-5"});case"external_link":return e.jsx(G,{className:"w-5 h-5"});default:return null}},j=()=>t.file_path?`/storage/${t.file_path}`:t.source_type==="google_drive"&&a.google_drive_id?`https://drive.google.com/uc?id=${a.google_drive_id}`:a.external_url?a.external_url:null;return e.jsxs(B,{breadcrumbs:M,children:[e.jsx($,{title:`Edit Media - ${n.title_en||"Untitled"}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Edit Media"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update media details and content"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",className:"gap-1",children:[t.type==="video"?e.jsx(w,{className:"w-3 h-3"}):e.jsx(p,{className:"w-3 h-3"}),t.type]}),e.jsxs(b,{variant:"secondary",className:"gap-1",children:[S(t.source_type),t.source_type.replace("_"," ")]}),t.featured_on_home&&e.jsx(b,{variant:"default",children:"Featured"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 max-w-6xl",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(v,{className:"overflow-hidden",children:[e.jsx(N,{className:"px-6 py-4 border-b",children:e.jsx(_,{className:"text-lg font-semibold",children:"Media Details"})}),e.jsx(y,{className:"p-6",children:e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{children:"Media Type"}),e.jsxs(P,{value:a.type,onValueChange:s=>i("type",s),children:[e.jsx(V,{className:l.type?"border-destructive":"",children:e.jsx(O,{placeholder:"Select media type"})}),e.jsxs(H,{children:[e.jsx(E,{value:"image",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Image"]})}),e.jsx(E,{value:"video",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),"Video"]})})]})]}),l.type&&e.jsx("p",{className:"text-sm text-destructive",children:l.type})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{children:"Source Type"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:["upload","google_drive","external_link"].map(s=>e.jsx("button",{type:"button",onClick:()=>i("source_type",s),className:`p-4 border rounded-lg transition-colors ${a.source_type===s?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[S(s),e.jsx("div",{className:"font-medium text-sm capitalize",children:s.replace("_"," ")})]})},s))})]}),j()&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{children:"Current Media"}),e.jsx("div",{className:"border rounded-lg p-4 bg-muted/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded overflow-hidden",children:c&&e.jsx("img",{src:c,alt:"Current media",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t.source_type==="upload"?"Uploaded file":t.source_type==="google_drive"?"Google Drive file":"External link"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:j()})]}),e.jsx("a",{href:j(),target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded hover:bg-muted",children:e.jsx(z,{className:"w-4 h-4"})})]})})]}),a.source_type==="upload"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{children:"Replace File (Optional)"}),e.jsx("div",{className:"border-2 border-dashed border-border rounded-lg p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[c&&a.file?e.jsxs("div",{className:"space-y-3",children:[e.jsx("img",{src:c,alt:"New preview",className:"mx-auto max-h-32 rounded"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["New file: ",a.file?.name]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{className:"mx-auto h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-sm",children:"Upload a new file to replace the current one"})]}),e.jsx("input",{type:"file",onChange:L,accept:a.type==="image"?"image/*":"video/*",className:"sr-only",id:"file-upload"}),e.jsxs(r,{htmlFor:"file-upload",className:"cursor-pointer inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:[e.jsx(u,{className:"w-4 h-4"}),"Choose New File"]})]})}),l.file&&e.jsx("p",{className:"text-sm text-destructive",children:l.file})]}),a.source_type==="google_drive"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{htmlFor:"google_drive_id",children:"Google Drive File ID"}),e.jsx(h,{id:"google_drive_id",type:"text",placeholder:"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",value:a.google_drive_id,onChange:s=>i("google_drive_id",s.target.value),className:l.google_drive_id?"border-destructive":""}),l.google_drive_id&&e.jsx("p",{className:"text-sm text-destructive",children:l.google_drive_id})]}),a.source_type==="external_link"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{htmlFor:"external_url",children:"External URL"}),e.jsx(h,{id:"external_url",type:"url",placeholder:"https://example.com/image.jpg",value:a.external_url,onChange:s=>i("external_url",s.target.value),className:l.external_url?"border-destructive":""}),l.external_url&&e.jsx("p",{className:"text-sm text-destructive",children:l.external_url})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{children:"Thumbnail"}),e.jsx("div",{className:"border border-border rounded-lg p-4",children:e.jsxs("div",{className:"text-center space-y-3",children:[x?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:x,alt:"Thumbnail",className:"mx-auto max-h-20 rounded"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.thumbnail?.name||"Current thumbnail"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"mx-auto h-6 w-6 text-muted-foreground"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"No thumbnail set"})]}),e.jsx("input",{type:"file",onChange:I,accept:"image/*",className:"sr-only",id:"thumbnail-upload"}),e.jsxs(r,{htmlFor:"thumbnail-upload",className:"cursor-pointer inline-flex items-center gap-2 px-3 py-1 bg-secondary text-secondary-foreground rounded hover:bg-secondary/80 text-sm",children:[e.jsx(u,{className:"w-3 h-3"}),x?"Change Thumbnail":"Add Thumbnail"]})]})}),l.thumbnail&&e.jsx("p",{className:"text-sm text-destructive",children:l.thumbnail})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"English Content"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{htmlFor:"title_en",children:"Title"}),e.jsx(h,{id:"title_en",type:"text",placeholder:"Enter English title",value:a.title_en,onChange:s=>i("title_en",s.target.value),className:l.title_en?"border-destructive":""}),l.title_en&&e.jsx("p",{className:"text-sm text-destructive",children:l.title_en})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{htmlFor:"description_en",children:"Description (Optional)"}),e.jsx(D,{id:"description_en",placeholder:"Enter English description",value:a.description_en,onChange:s=>i("description_en",s.target.value),rows:3})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"Arabic Content"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{htmlFor:"title_ar",children:"Title"}),e.jsx(h,{id:"title_ar",type:"text",placeholder:"أدخل العنوان بالعربية",value:a.title_ar,onChange:s=>i("title_ar",s.target.value),className:l.title_ar?"border-destructive":"",dir:"rtl"}),l.title_ar&&e.jsx("p",{className:"text-sm text-destructive",children:l.title_ar})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{htmlFor:"description_ar",children:"Description (Optional)"}),e.jsx(D,{id:"description_ar",placeholder:"أدخل الوصف بالعربية",value:a.description_ar,onChange:s=>i("description_ar",s.target.value),rows:3,dir:"rtl"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(r,{htmlFor:"source_url",children:"Source URL (Optional)"}),e.jsx(h,{id:"source_url",type:"url",placeholder:"https://example.com/original-source",value:a.source_url,onChange:s=>i("source_url",s.target.value)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx(U,{checked:a.featured_on_home,onCheckedChange:s=>i("featured_on_home",s)}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium leading-none",children:"Featured on Home"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Show this media in the home page gallery"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 py-2",children:[e.jsx(U,{checked:a.is_active,onCheckedChange:s=>i("is_active",s)}),e.jsxs("div",{children:[e.jsx(r,{className:"text-sm font-medium leading-none",children:"Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make this media visible throughout the site"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(k,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx(k,{type:"submit",disabled:C,className:"gap-2",children:C?"Updating...":"Update Media"})]})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(v,{children:[e.jsx(N,{className:"px-6 py-4 border-b",children:e.jsx(_,{className:"text-lg font-semibold",children:"Preview"})}),e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:c||x?e.jsx("img",{src:c||x||"",alt:"Preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[a.type==="video"?e.jsx(w,{className:"mx-auto w-8 h-8 mb-2"}):e.jsx(p,{className:"mx-auto w-8 h-8 mb-2"}),e.jsx("p",{className:"text-sm",children:"No preview available"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-medium text-sm",children:a.title_en||"Title will appear here"}),a.description_en&&e.jsx("p",{className:"text-xs text-muted-foreground",children:a.description_en})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx("span",{className:"capitalize",children:a.type})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Source:"}),e.jsx("span",{className:"capitalize",children:a.source_type.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Featured:"}),e.jsx("span",{children:a.featured_on_home?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Active:"}),e.jsx("span",{children:a.is_active?"Yes":"No"})]})]})]})})]}),e.jsxs(v,{children:[e.jsx(N,{className:"px-6 py-4 border-b",children:e.jsx(_,{className:"text-lg font-semibold",children:"Media Info"})}),e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"ID:"}),e.jsx("span",{className:"font-mono",children:t.media_id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Updated:"}),e.jsx("span",{children:new Date(t.updated_at).toLocaleDateString()})]})]})})]})]})]})]})]})}export{ue as default};
